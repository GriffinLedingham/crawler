var tileLibrary={walltop_w:0,walltop:1,walltop_e:2,walltop_cntr:3,blank:4,wallface_w:5,wallface:6,wallface_e:7,wallface_cntr:8,floorwall_w:10,floorwall:11,floorwall_e:12,floorwall_cntr:13,blankwall:14,floor:15,floor_1:16,floor_2:17},tileMapTranslate=function(a){var c,d,e,f,g,h,i,j,k,l,m,b=[],n=a.length;for(c=0;c<n;c++)for(b[c]=[],d=0;d<n;d++)b[c][d]=tileLibrary.blank;for(console.log(b),c=1;c<n-1;c++)for(d=1;d<n-1;d++)e=a[c][d],f=a[c][d-1],g=a[c][d+1],h=a[c+1][d],i=a[c-1][d],j=a[c+1][d-1],k=a[c-1][d-1],l=a[c+1][d+1],m=a[c-1][d+1],0==e?0!=g||0!=f?b[c][d]=tileLibrary.wallface:0!=h||0!=i||0!=l||0!=m?b[c][d]=tileLibrary.walltop:0==j&&0==k||(b[c][d]=tileLibrary.wallface):b[c][d]=randTile([tileLibrary.floor,tileLibrary.floor_1,tileLibrary.floor_2],[1,.05,.05]);for(c=1;c<n-1;c++)for(d=1;d<n-1;d++)e=b[c][d],f=b[c][d-1],g=b[c][d+1],h=b[c+1][d],i=b[c-1][d],j=b[c+1][d-1],k=b[c-1][d-1],l=b[c+1][d+1],m=b[c-1][d+1],isWallface(e)&&isWalltop(g)?b[c][d]=tileLibrary.walltop:isWallface(e)&&isWallface(g)?b[c][d]=tileLibrary.walltop:isFloor(e)&&isWallface(f)?b[c][d]=tileLibrary.floorwall:e==tileLibrary.blank&&isWallface(f)&&(b[c][d]=tileLibrary.blankwall);for(c=1;c<n-1;c++)for(d=1;d<n-1;d++)e=b[c][d],f=b[c][d-1],g=b[c][d+1],h=b[c+1][d],i=b[c-1][d],isWallface(e)&&(isFloor(i)||isFloorwall(i))?b[c][d]=tileLibrary.wallface_w:isWallface(e)&&(isFloor(h)||isFloorwall(h))?b[c][d]=tileLibrary.wallface_e:isFloorwall(e)&&isFloor(i)?b[c][d]=tileLibrary.floorwall_w:isFloorwall(e)&&isFloor(h)?b[c][d]=tileLibrary.floorwall_e:isWalltop(e)&&isFloor(i)&&isFloor(f)?b[c][d]=tileLibrary.walltop_w:isWalltop(e)&&isFloor(h)&&isFloor(f)&&(b[c][d]=tileLibrary.walltop_e),(isFloor(i)||isFloorwall(i))&&(isFloor(h)||isFloorwall(h))&&(isWalltop(e)&&isFloor(f)?b[c][d]=tileLibrary.walltop_cntr:isWallface(e)&&(isFloor(g)||isFloorwall(g))&&(b[c][d]=tileLibrary.wallface_cntr)),isFloorwall(e)&&f==tileLibrary.wallface_cntr&&(b[c][d]=tileLibrary.floorwall_cntr);return b},isWallface=function(a){return a==tileLibrary.wallface||a==tileLibrary.wallface_e||a==tileLibrary.wallface_w||a==tileLibrary.wallface_cntr?1:0},isWalltop=function(a){return a==tileLibrary.walltop||a==tileLibrary.walltop_e||a==tileLibrary.walltop_w||a==tileLibrary.walltop_cntr?1:0},isFloorwall=function(a){return a==tileLibrary.floorwall||a==tileLibrary.floorwall_e||a==tileLibrary.floorwall_w||a==tileLibrary.floorwall_cntr?1:0},isFloor=function(a){return a==tileLibrary.floor||a==tileLibrary.floor_1||a==tileLibrary.floor_2?1:0},randTile=function(a,b){if(1==a.length)return a[0];for(var c=0,d=1;d<a.length;d++)if(Math.random()<=b[d]){c=d;break}return a[c]};